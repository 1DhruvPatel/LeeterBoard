<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeeterBoard - MIT Members</title>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/unitest.css') }}">
</head>
<body>
    <header class="header">
        <div class="header-wrap">
            <a href="{{ url_for('home') }}" class="logo-section">
                <img src="{{ url_for('static', filename='icons/test_logo.png') }}" alt="LeeterBoard Logo" class="logo">
            </a>
            <div class="nav-links">
                <a href="#" class="nav-link">Compare</a>
                <a href="#" class="nav-link">Universities</a>
                <a href="#" class="nav-link">About</a>
              </div>
        </div>
    </header>
    
    <main>
        <div class="content-container">
            <!-- University Header Bar -->
            <div class="university-header" style="--school-color: {{ university_colors[school_name] }};">
                <div class="university-info">
                    <img src="https://cdn.brandfetch.io/{{ university_websites[school_name] }}/w/400/h/400?c=1idl-cR2qqIMB2mSLMf" class="university-logo"></img>
                    <div>
                        <h2>{{ school_name }}</h2>
                    </div>
                </div>
                <a href="#" class="view-stats-button" style="--school-color: {{ university_colors[school_name] }};">VIEW PROFILE</a>
            </div>
            
            <!-- Members Table -->
            <div class="members-table">
                <div class="table-header" style="--school-color: {{ university_colors[school_name] }};">
                    <div class="column-rank">Rank</div>
                    <div class="column-username">Username</div>
                    <div class="column-rating">Contest Rating</div>
                    <div class="column-change">Rating Change</div>
                </div>
                
                <ul class="members-list">
                    {% for user in users %}
                    <!-- Member items -->
                    <a href="https://leetcode.com/u/{{ user.username }}/" class="user-row-clickable" target="_blank">
                        <li class="member-item" style="--school-color: {{ university_colors[school_name] }};">
                            <div class="rank-container">
                                {% if loop.index0 + 1 == 1 %}
                                    <div class="rank-number gold">{{ loop.index0 + 1 }}</div>
                                {% elif loop.index0 + 1 == 2 %}
                                    <div class="rank-number silver">{{ loop.index0 + 1 }}</div>
                                {% elif loop.index0 + 1 == 3 %}
                                    <div class="rank-number bronze">{{ loop.index0 + 1 }}</div>
                                {% else %}
                                    <div class="rank-number">{{ loop.index0 + 1 }}</div>
                                {% endif %}
                            </div>
                            <div class="user-info">
                                <img src="{{ user.userAvatar }}" div class="user-avatar"></img>
                                <div class="username">{{ user.username }}</div>
                            </div>
                            <div class="rating">{{ "%.2f" | format(user.currentRating) }}</div>


                            {% if user.ratingChange > 0 %}
                                <div class="rating-change positive">+{{ "%.2f" | format(user.ratingChange) }}</div>
                            {% elif user.ratingChange < 0 %}
                                <div class="rating-change negative">{{ "%.2f" | format(user.ratingChange) }}</div>
                            {% else %}
                                <div class="rating-change">{{ "%.2f" | format(user.ratingChange) }}</div>
                            {% endif %}
                        </li>
                    </a>
                    {% endfor %}
                </ul>
            </div>
            
            <!-- University Color Pattern Bar -->
            {% macro school_pattern_divider(school_name) %}
            {% set svg_url = 'data:image/svg+xml,%3Csvg width=%22100%22 height=%2215%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Crect width=%2233.33%22 height=%2215%22 x=%220%22 fill=%22' ~ university_colors[school_name]|replace('#', '%23') ~ '%22 fill-opacity=%220.7%22/%3E%3Crect width=%2233.33%22 height=%2215%22 x=%2233.33%22 fill=%22' ~ university_colors[school_name]|replace('#', '%23') ~ '%22 fill-opacity=%220.5%22/%3E%3Crect width=%2233.33%22 height=%2215%22 x=%2266.66%22 fill=%22' ~ university_colors[school_name]|replace('#', '%23') ~ '%22 fill-opacity=%220.3%22/%3E%3C/svg%3E' %}
            <div class="pattern-divider" style="height: 15px; margin: 30px 0; background-image: url('{{ svg_url }}'); background-size: 100px 15px; border-radius: 2px; opacity: 0.8;"></div>
            {% endmacro %}

            {{ school_pattern_divider(school_name) }}
        </div>
    </main>
</body>
</html>