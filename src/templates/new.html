<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeeterBoard - University Coding Rankings</title>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/new.css') }}">
</head>
<body>
    <header>
        <div class="header-wrap">
            <a href="{{ url_for('home') }}">
                <img src="{{ url_for('static', filename='icons/test_logo.png') }}" alt="LeeterBoard Logo" class="logo">
            </a>
            <div class="nav-links">
                <a href="#" class="nav-link">Compare Universities</a>
                <a href="#" class="nav-link">All Universities</a>
              </div>
        </div>
    </header>
    
    <main>
        <div class="content-container">
            <!-- Main Rankings Table Section -->
            <div class="rankings-section">
                <form method="POST" action="{{ url_for('home')}}">
                    <div class="rankings-header">
                        <h2>University Rankings</h2>
                        <div class="search-container">
                            <button type="button" class="search-button">
                                <img src="{{ url_for('static', filename='icons/search.svg') }}" class="search-icon">
                            </button>
                            <input type="text" name="school_input" class="search-input" placeholder="Search for universities..." autocomplete="off">
                        </div>
                    </div>
                </form>
                
                <div class="table-header">
                    <div class="column-rank">Rank</div>
                    <div class="column-university">University</div>
                    <div class="column-rating">Contest Rating</div>
                    <div class="column-change">Rating Δ</div>
                </div>
                
                <ul class="university-list">
                    {% for rating, school, rating_change in school_info %}

                    <li class="university-item">
                        <div class="rank-container">
                            <div class="rank-number ">{{ loop.index0 + 1 }}</div>
                        </div>
                        <div class="university-info">
                            <!-- <img src="https://img.logo.dev/{{ university_websites[school] }}" class="university-logo"></img> -->
                            <img src="https://cdn.brandfetch.io/{{ university_websites[school] }}/w/400/h/400?c=1idl-cR2qqIMB2mSLMf" class="university-logo"></img>
                            <div class="university-details">
                                <div class="university-name">{{ school }}</div>
                                <div class="university-stats">
                                    <span class="stat-item"><span class="stat-icon">👥</span> [MEMBERS] </span>
                                </div>
                            </div>
                        </div>
                        <div class="rating">{{ "%.2f" | format(rating) }}</div>
                        {% if rating_change > 0 %}
                            <div class="rating-change positive">+{{ "%.2f" | format(rating_change) }}</div>
                        {% elif rating_change < 0 %}
                            <div class="rating-change negative">{{ "%.2f" | format(rating_change) }}</div>
                        {% else %}
                            <div class="rating-change neutral">{{ "%.2f" | format(rating_change) }}</div>
                        {% endif %}
                    </li>
                    
                    {% endfor %}
                </ul>
                
                <div class="pagination">
                    <button class="pagination-btn active">1</button>
                    <button class="pagination-btn">2</button>
                    <button class="pagination-btn">3</button>
                    <span class="pagination-dots">...</span>
                    <button class="pagination-btn">10</button>
                </div>
            </div>
            
            <!-- Widgets Section -->
            <div class="widgets-section">
                <!-- Trending Users Widget -->
                <div class="widget">
                    <div class="widget-header">
                        <h3>Trending Users</h3>
                    </div>
                    
                    <div class="widget-content">
                        <div class="widget-legend">
                            <span class="legend-rank">Rank</span>
                            <span class="legend-user">User</span>
                            <span class="legend-rating">Rating Δ</span>
                        </div>
                        
                        <ul class="widget-list">

                            {% for rating_change, user, user_avatar in user_rating_changes[:5] %}

                            <li class="widget-item">
                                <div class="user-rank">
                                    <div class="rank-circle">{{ loop.index0 + 1 }}</div>
                                </div>
                                <a href="https://leetcode.com/u/{{ user }}/" class="user-info" target="_blank">
                                    <img src="{{ user_avatar }}" class="user-avatar">
                                    <div class="user-details">
                                        <div class="user-name">{{ user }}</div>
                                        <div class="user-university">[SCHOOL]</div>
                                    </div>
                                </a>
                                <div class="user-rating positive">+{{ "%.2f" | format(rating_change) }}</div>
                            </li>

                            {% endfor %}
                            
                        </ul>
                    </div>
                </div>
                
                <!-- Trending Universities Widget -->
                <div class="widget">
                    <div class="widget-header">
                        <h3>Trending Universities</h3>
                    </div>
                    
                    <div class="widget-content">
                        <div class="widget-legend">
                            <span class="legend-rank">Rank</span>
                            <span class="legend-user">University</span>
                            <span class="legend-rating">Rating Δ</span>
                        </div>
                        
                        <ul class="widget-list">

                            {% for rating, school, rating_change in school_rating_changes[:5] %}
                            
                            <li class="widget-item">
                                <div class="user-rank">
                                    <div class="rank-circle">{{ loop.index0 + 1 }}</div>
                                </div>
                                <div class="user-info">
                                    <img src="https://img.logo.dev/{{ university_websites[school] }}" div class="user-avatar"></img>
                                    <div class="user-details">
                                        <div class="user-name">{{ university_abbreviations[school] }}</div>
                                        <div class="user-count">[MEMBERS]</div>
                                    </div>
                                </div>
                                <div class="user-rating positive">+{{ "%.2f" | format(rating_change) }}</div>
                            </li>

                            {% endfor %}
                            

                        </ul>
                    </div>
                </div>
                
                <!-- Top Universities Widget -->
                <div class="widget">
                    <div class="widget-header">
                        <h3>Top Universities</h3>
                    </div>
                    
                    <div class="widget-content">
                        <ul class="widget-list">

                            {% for rating, school, school_rating_change in school_info[:5] %}
                            
                            <li class="widget-item">
                                <div class="user-rank">
                                    <div class="rank-circle">{{ loop.index0 + 1 }}</div>
                                </div>
                                <div class="user-info">
                                    <img src="https://img.logo.dev/{{ university_websites[school] }}" div class="user-avatar"></img>
                                    <div class="user-details">
                                        <div class="user-name">{{ university_abbreviations[school] }}</div>
                                        <div class="user-count">[MEMBERS]</div>
                                    </div>
                                </div>
                                <div class="user-rating">{{ "%.2f" | format(rating) }}</div>
                            </li>

                            {% endfor %}
                            

                        </ul>
                    </div>
                </div>
                
                <!-- Recent Activity Widget -->
                <div class="widget activity-widget">
                    <div class="widget-header">
                        <h3>Recent Activity</h3>
                    </div>
                    
                    <div class="widget-content">
                        <ul class="activity-list">
                            <li class="activity-item">
                                <div class="activity-icon contest">🏁</div>
                                <div class="activity-content">
                                    <div class="activity-title">Weekly Challenge #42 Completed</div>
                                    <div class="activity-time">2 hours ago</div>
                                </div>
                            </li>
                            
                            <li class="activity-item">
                                <div class="activity-icon achievement">🏅</div>
                                <div class="activity-content">
                                    <div class="activity-title">MIT earned "Algorithm Masters" badge</div>
                                    <div class="activity-time">Yesterday</div>
                                </div>
                            </li>
                            
                            <li class="activity-item">
                                <div class="activity-icon user">👤</div>
                                <div class="activity-content">
                                    <div class="activity-title">shivam_1v broke the rating record</div>
                                    <div class="activity-time">3 days ago</div>
                                </div>
                            </li>
                            
                            <li class="activity-item">
                                <div class="activity-icon contest">🏁</div>
                                <div class="activity-content">
                                    <div class="activity-title">March Coding Challenge announced</div>
                                    <div class="activity-time">5 days ago</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <span class="logo-text">Leeter<span class="logo-highlight">Board</span></span>
            </div>
            <div class="footer-links">
                <a href="#">About</a>
                <a href="#">FAQ</a>
                <a href="#">Contact</a>
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
            </div>
            <div class="footer-copyright">
                © 2025 LeeterBoard. All rights reserved.
            </div>
        </div>
    </footer>



    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get search input element
            const searchInput = document.querySelector('.search-input');
        
            // Get search form
            const searchForm = document.querySelector('form');

            // When search button is clicked
            const searchButton = document.querySelector('.search-button');
            searchButton.addEventListener('click', function(event) {
                event.preventDefault();
                const universityName = searchInput.value.trim();

                if(universityName) {
                    searchForm.submit();
                }
            });

            // When university row is clicked
            const universityRows = document.querySelectorAll('.university-item');
            universityRows.forEach(row => {
                row.addEventListener('click', function(event) {
                    event.preventDefault();

                    const universityNameContainer = this.querySelector('.university-name');
                    const universityName = universityNameContainer.textContent.trim();

                    // Set the search input value to the clicked university name
                    searchInput.value = universityName;

                    if(universityName) {
                        searchForm.submit();
                    }
                })
            })
        });
    </script>
</body>
</html>